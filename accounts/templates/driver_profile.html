{% extends 'driver_home.html' %}

{# Override page title (base.html should print this inside the <title>) #}
{% block title %}DriveMate - Driver Profile{% endblock %}


{% block profile_active %}
  bg-[var(--accent-color)] text-[var(--primary-color)] font-semibold
{% endblock %}

{% block home_active %}

{% endblock %}
{% block content %}
<div class="min-h-screen p-8 bg-[var(--background-color)]">
  {# Top header #}
  <header class="mb-6">
    <h1 class="text-3xl font-bold text-[var(--text-primary)]">Driver Profile</h1>
  </header>

  {# Messages (flash) #}
  {% if messages %}
  <div class="mb-4">
    <ul class="space-y-2">
      {% for message in messages %}
        <li class="px-4 py-2 rounded-lg bg-yellow-50 text-sm text-[var(--text-primary)]">{{ message }}</li>
      {% endfor %}
    </ul>
  </div>
  {% endif %}

  <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
    {# Profile card (left) #}
    <aside class="bg-white rounded-lg shadow p-6 flex flex-col items-center gap-4">
      <div class="w-28 h-28 rounded-full overflow-hidden bg-center bg-cover" style="background-image: url('{{ driver.profile_pic.url }}')"></div>
      <h2 class="text-xl font-semibold">{{ user.name }}</h2>
      <p class="text-sm text-[var(--text-secondary)]">{{ user.email }}</p>

      <div class="w-full mt-4">
        <a href="{% url 'driver_profile_edit' %}" class="block text-center bg-[var(--primary-color)] text-white px-4 py-2 rounded-lg font-medium">Edit Profile</a>
      </div>
    </aside>

    {# Main content (middle) #}
    <section class="lg:col-span-2 space-y-6">

      <div class="bg-white rounded-lg shadow-md p-6">
        <h3 class="text-xl font-semibold mb-4">Driver Information</h3>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-3 text-sm text-[var(--text-secondary)]">
          <div><strong class="text-[var(--text-primary)]">License:</strong> {{ driver.license_number }}</div>
          <div><strong class="text-[var(--text-primary)]">License Expiry:</strong> {{ driver.license_expiry }}</div>
          <div><strong class="text-[var(--text-primary)]">Experience:</strong> {{ driver.experience_years }} years</div>
          <div><strong class="text-[var(--text-primary)]">Verified:</strong> {% if driver.verified %}Yes{% else %}No{% endif %}</div>
          <div><strong class="text-[var(--text-primary)]">Background Check:</strong> {% if driver.background_check_passed %}Passed{% else %}Pending{% endif %}</div>
          <div><strong class="text-[var(--text-primary)]">Day Charge:</strong> {{ driver.day_fixed_charge }}</div>
          <div><strong class="text-[var(--text-primary)]">Night Charge:</strong> {{ driver.night_fixed_charge }}</div>
          <div><strong class="text-[var(--text-primary)]">Night Window:</strong> {{ driver.night_start }} - {{ driver.night_end }}</div>
        </div>

        {% if driver.id_proof %}
        <div class="mt-4">
          <a class="text-sm underline" href="{{ driver.id_proof.url }}" target="_blank">View ID proof</a>
        </div>
        {% endif %}
      </div>
    </section>
  </div>
</div>
{% endblock %}
